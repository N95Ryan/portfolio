import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.DYrVU9rO.js";function q({lang:v,translations:c}){const n=c.form,l=c.messages,[d,m]=o.useState(""),[g,x]=o.useState(""),[f,b]=o.useState(""),[p,h]=o.useState(""),[y,j]=o.useState(""),[N,i]=o.useState(""),[a,w]=o.useState(!1),E=async s=>{s.preventDefault(),j(""),i(""),w(!0);try{console.log("Envoi de la requête au serveur...");const t=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,email:g,subject:f,message:p,lang:v})});console.log("Réponse reçue - Status:",t.status,t.statusText),console.log("Content-Type:",t.headers.get("content-type"));const S=t.headers.get("content-type");if(!S||!S.includes("application/json")){const r=await t.text();console.error("Réponse non-JSON reçue:",r.substring(0,200)),i(l.error_email_send);return}let u;try{const r=await t.text();console.log("Réponse brute:",r.substring(0,500)),u=JSON.parse(r)}catch(r){console.error("Erreur lors du parsing de la réponse JSON:",r),i(l.error_email_send);return}if(t.ok)j(l.success),m(""),x(""),b(""),h("");else{const r=u?.message||l.error_email_send;console.error("Erreur API - Status:",t.status),console.error("Erreur API - Message:",r),console.error("Erreur API - Données complètes:",u),i(r)}}catch(t){console.error("Erreur lors de l'envoi du formulaire:",t),i(l.error_email_send)}finally{w(!1)}};return e.jsxs("div",{className:"w-full p-6 bg-gray-900 bg-opacity-50 rounded-lg shadow-lg",children:[e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"name",className:"text-lg font-medium text-white mb-2",children:n.name}),e.jsx("input",{id:"name",type:"text",value:d,onChange:s=>m(s.target.value),className:"w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,disabled:a})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"email",className:"text-lg font-medium text-white mb-2",children:n.email}),e.jsx("input",{id:"email",type:"email",value:g,onChange:s=>x(s.target.value),className:"w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,disabled:a})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"subject",className:"text-lg font-medium text-white mb-2",children:n.subject}),e.jsx("input",{id:"subject",type:"text",value:f,onChange:s=>b(s.target.value),className:"w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,disabled:a})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"message",className:"text-lg font-medium text-white mb-2",children:n.message}),e.jsx("textarea",{id:"message",value:p,onChange:s=>h(s.target.value),className:"w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:5,required:!0,disabled:a})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"...":n.send})]}),y&&e.jsx("p",{className:"mt-6 text-center text-green-400 font-medium",children:y}),N&&e.jsx("p",{className:"mt-6 text-center text-red-400 font-medium",children:N})]})}export{q as default};
